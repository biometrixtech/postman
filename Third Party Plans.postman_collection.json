{
	"info": {
		"_postman_id": "c8dfb4be-8809-4131-a552-4069474f2791",
		"name": "Third Party Plans",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "create daily readiness survey with planned session",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "b5cf0103-7fb4-4007-8f4a-7c97ef601181",
						"exec": [
							"postman.setEnvironmentVariable('date_time',(new Date().toISOString().split('.')[0]+'Z'))",
							"postman.setEnvironmentVariable('event_date',(new Date().toISOString().split('T')[0]+'T12:30:00Z'))"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "e63adb04-e53d-46de-9942-f5b8e59b407a",
						"exec": [
							"pm.test(\"Successful API call\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"const responseJSON = pm.response.json();",
							"",
							"pm.test(\"Response should include daily plan with post active rest recovery modality\", function () {",
							"    //pm.response.to.not.be.error;",
							"    pm.expect(responseJSON).to.have.property('daily_plans');",
							"    pm.expect(responseJSON.daily_plans[0]).to.have.property('modalities');",
							"    pm.expect(responseJSON.daily_plans[0].modalities.length).to.eql(1)",
							"    pm.expect(responseJSON.daily_plans[0].modalities[0].type).to.eql(1)",
							"    //pm.expect(pm.response.json()).to.include({'message': \"14 is not a valid VisualizationType\"});",
							"    //pm.response.to.have.jsonBody(\"14 is not a valid VisualizationType\");",
							"    //pm.response.to.not.have.jsonBody(\"error\");",
							"});",
							"",
							"pm.environment.set(\"session_id\", responseJSON.daily_plans[0].training_sessions[0].session_id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "{{jwt}}"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"date_time\": \"{{date_time}}\",\n\"soreness\":[{\n\t\t\t\t                \"body_part\": 7,\n\t\t\t\t                \"severity\": 3,\n\t\t\t\t                \"movement\": 3,\n\t\t\t\t                \"pain\": false,\n\t\t\t\t                \"side\": 1\n\t\t\t\t            }],\n\"sessions_planned\": false,\n\"sessions\": [{\n\t\t\t\t    \"event_date\": \"{{event_date}}\",\n\t\t\t\t    \"session_type\": 6,\n\t\t\t\t    \"sport_name\": 1,\n\t\t\t\t    \"source\": 0,\n\t\t\t\t    \"duration\": 30,\n\t\t\t\t    \"workout_program_module\": {\n\t\t\t\t    \t\"provider_id\": \"test_id\",\n\t\t\t\t    \t\"program_id\": \"23G\",\n\t\t\t\t    \t\"program_module_id\": \"56\",\n\t\t\t\t    \t\"workout_sections\": [{\n\t\t\t\t    \t\t\"name\": \"Upper Body Work\",\n\t\t\t\t    \t\t\"duration_seconds\": 360,\n\t\t\t\t    \t\t\"workout_section_type\": \"1\",\n\t\t\t\t    \t\t\"difficulty\": 5,\n\t\t\t\t    \t\t\"intensity_pace\": 5,\n\t\t\t\t    \t\t\"exercises\": [\n\t\t\t\t    \t\t\t{\n\t\t\t\t    \t\t\t\t\"id\": \"1\",\n\t\t\t\t    \t\t\t\t\"name\": \"Bench Press\",\n\t\t\t\t    \t\t\t\t\"weight_in_lbs\": 102.5,\n\t\t\t\t    \t\t\t\t\"weight_type\": \"36\",\n\t\t\t\t    \t\t\t\t\"sets\": 2,\n\t\t\t\t    \t\t\t\t\"reps_per_set\": 10,\n\t\t\t\t    \t\t\t\t\"reps_unit\": 1,\n\t\t\t\t    \t\t\t\t\"intensity_pace\": 5\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t\t]\n\t\t\t\t    \t}]\n\t\t\t\t    }\n\t\t    \t\t}\n\t\t    \t]\n}"
				},
				"url": {
					"raw": "http://apis.{{env}}.fathomai.com/plans/{{api_version}}/daily_readiness/{{user_id}}",
					"protocol": "http",
					"host": [
						"apis",
						"{{env}}",
						"fathomai",
						"com"
					],
					"path": [
						"plans",
						"{{api_version}}",
						"daily_readiness",
						"{{user_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "delete session",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "6470107d-8feb-48e2-b304-1f222e79b523",
						"exec": [
							"postman.setEnvironmentVariable('event_date',(new Date().toISOString().split('T')[0]+'T12:30:00Z'))"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "{{jwt}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"event_date\": \"{{event_date}}\",\n    \"session_type\": 6\n}"
				},
				"url": {
					"raw": "http://apis.{{env}}.fathomai.com/plans/{{api_version}}/session/{{user_id}}/{{session_id}}",
					"protocol": "http",
					"host": [
						"apis",
						"{{env}}",
						"fathomai",
						"com"
					],
					"path": [
						"plans",
						"{{api_version}}",
						"session",
						"{{user_id}}",
						"{{session_id}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Session",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "ad7b4b77-1483-4a2d-b047-cb9a3d2ae33b",
						"exec": [
							"postman.setEnvironmentVariable('current_time',(new Date().toISOString().split('.')[0]+'Z'))",
							"postman.setEnvironmentVariable('end_time',(new Date().toISOString().split('.')[0]+'Z'))"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "{{jwt}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"event_date\": \"{{current_time}}\",\n    \"user_age\": 32,\n    \"return_updated_plan\": true,\n    \"sessions\": [{\"event_date\": \"{{date_time}}\",\n                  \"end_date\": \"{{date_time}}\",\n                  \"session_type\": 6,\n                  \"sport_name\": 1,\n                  \"duration\": 90.5,\n                  \"calories\": 50,\n                  \"distance\": 100,\n                  \"source\": 0,\n                  \"hr_data\": [\n                                {\"value\": 153, \"startDate\": \"2019-01-12T10:43:08.490-0500\", \"endDate\": \"2019-01-12T10:43:08.490-0500\"},\n                                {\"value\": 156, \"startDate\": \"2019-01-12T10:43:03.490-0500\", \"endDate\": \"2019-01-12T10:43:03.490-0500\"},\n                                {\"value\": 161, \"startDate\": \"2019-01-12T10:42:58.490-0500\", \"endDate\": \"2019-01-12T10:42:58.490-0500\"},\n                                {\"value\": 163, \"startDate\": \"2019-01-12T10:42:56.490-0500\", \"endDate\": \"2019-01-12T10:42:56.490-0500\"},\n                                {\"value\": 167, \"startDate\": \"2019-01-12T10:42:50.490-0500\", \"endDate\": \"2019-01-12T10:42:50.490-0500\"},\n                                {\"value\": 163, \"startDate\": \"2019-01-12T10:42:47.490-0500\", \"endDate\": \"2019-01-12T10:42:47.490-0500\"},\n                                {\"value\": 127, \"startDate\": \"2019-01-12T10:41:23.490-0500\", \"endDate\": \"2019-01-12T10:41:23.490-0500\"}\n                            ]\n    }\n    \t]\n}"
				},
				"url": {
					"raw": "http://apis.{{env}}.fathomai.com/plans/{{api_version}}/session/{{user_id}}/{{session_id}}",
					"protocol": "http",
					"host": [
						"apis",
						"{{env}}",
						"fathomai",
						"com"
					],
					"path": [
						"plans",
						"{{api_version}}",
						"session",
						"{{user_id}}",
						"{{session_id}}"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "1ec09219-e696-4630-9feb-e588b6c84141",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "844c1590-ed97-40ab-9156-07c4fee47de7",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "7b4465b1-f153-464c-bcab-2870873491a7",
			"key": "api_version",
			"value": "4_8",
			"type": "string"
		},
		{
			"id": "eca9b838-94b1-40f1-a9e1-763460338061",
			"key": "session_id",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}